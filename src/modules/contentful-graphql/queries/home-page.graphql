query HomePage(
  $locale: String!,
  $preview: Boolean = false,
  $identifier: String,
  $date: DateTime,
  $skipCuratedEntities: Boolean = true
) {
  homePageCollection(
    preview: $preview,
    locale: $locale,
    order: datePublished_DESC,
    limit: 1,
    where: {
      identifier: $identifier,
      datePublished_lte: $date
    }
  ) {
    items {
      name
      identifier
      sectionsCollection {
        items {
          __typename
          ... on PrimaryCallToAction {
            name
      			text
      			relatedLink {
        			url
        			text
      			}
            image {
              ...illustrationFields
            }
          }
        }
      }
      primaryImageOfPage {
        ...imageWithAttributionFields
      }
      image {
        ...imageFields
      }
    }
  }

  curatedEntities: entityPageCollection(preview: $preview, locale: $locale, limit: 1000) @skip(if: $skipCuratedEntities) {
    items {
      name
      nameEN: name(locale: "en-GB")
      identifier
      genre
      description
      primaryImageOfPage {
        image {
          url
          contentType
        }
      }
    }
  }
}

fragment imageWithAttributionFields on ImageWithAttribution {
  name
  creator
  provider
  license
  url
  image {
    ...imageFields
  }
}

fragment illustrationFields on Illustration {
  image {
    ...imageFields
  }
}

fragment imageFields on Asset {
  url
  contentType
  description
  width
  height
}
